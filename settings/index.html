<!DOCTYPE html>
<html>
  <head>
    <!-- The '/homey.js' script must be included in your settings view to work -->
    <script
      type="text/javascript"
      src="/homey.js"
      data-origin="settings"
    ></script>
  </head>

  <body>
    <header class="homey-header">
      <h1 class="homey-title">Webhook url</h1>
    </header>

    <p>
      The following url is the webhook url for your Homey.
    </p>
    
    <div class="homey-form-group">
      <label class="homey-form-label" for="webhookUrl">Url</label>
      <input class="homey-form-input" id="webhookUrl" type="text" value="" readonly />
    </div>

    <p>
      Add the query parameter <b>&event=<i>[...]</i></b> at the end of the url to trigger a specific event.
    </p>

    <p>
      NOTE: The header <i>Authorization</i> and the query parameter <i>homey</i> is stripped from 
      the output tags of flows.
    </p>

    <script type="text/javascript">
      // a method named 'onHomeyReady' must be present in your code
      function onHomeyReady(Homey) {
        var urlElement = document.getElementById("webhookUrl");

        Homey.get("webhook_url", function (err, webhookUrl) {
          urlElement.value = webhookUrl;
        });

        Homey.ready();
      }
    </script>
    
  </body>
</html>